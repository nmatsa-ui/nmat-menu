<script>
let cart=[];

function add(name,price){
let i=cart.find(x=>x.name===name);
if(i){i.qty++}else{cart.push({name,price,qty:1})}
render()
}

function changeQty(name,delta){
let i=cart.find(x=>x.name===name);
if(!i)return;
i.qty+=delta;
if(i.qty<=0){
cart=cart.filter(x=>x.name!==name)
}
render()
}

function render(){
let sum=0;
let html='';
cart.forEach(i=>{
let s=i.qty*i.price;
sum+=s;
html+=`
<div class="cart-item">
<span>${i.name}</span>
<div class="cart-controls">
<button onclick="changeQty('${i.name}',1)">+</button>
<button onclick="changeQty('${i.name}',-1)">âˆ’</button>
<button class="remove" onclick="changeQty('${i.name}',-${i.qty})">âœ•</button>
</div>
</div>
`;
});
document.getElementById('cartText').innerHTML=
cart.length
?html+`<hr><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${sum.toFixed(2)} ï·¼</strong>`
:'ðŸ›’ Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©';
}

function checkout(){
if(!cart.length)return;

let msg=
`ðŸš— Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ Ù„Ù„Ø³ÙŠØ§Ø±Ø©
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
Ø§Ù„Ø·Ù„Ø¨Ø§Øª:
`;

let sum=0;
cart.forEach(i=>{
let s=i.qty*i.price;
sum+=s;
msg+=`â€¢ ${i.name} Ã— ${i.qty} = ${s.toFixed(2)} ï·¼\n`;
});

msg+=
`â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${sum.toFixed(2)} ï·¼
ÙŠØ±Ø¬Ù‰ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø·Ù„Ø¨ ðŸš€`;

window.open(
'https://wa.me/966532212529?text='+encodeURIComponent(msg)
);
}
</script>
